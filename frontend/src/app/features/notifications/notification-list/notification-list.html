<div class="notification-container">
  <div class="notification-header">
    <h2 class="notification-title">
      <mat-icon class="notification-icon">notifications</mat-icon>
      Pending Notifications
    </h2>
  </div>

  <div class="notification-stats">
    <div class="stat-item">
      <span class="stat-label">Pending:</span>
      <span class="stat-value">{{ notifications.length }}</span>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="40"></mat-spinner>
    <p>Loading notifications...</p>
  </div>

  <div *ngIf="!loading && notifications.length === 0" class="no-notifications">
    <mat-icon class="empty-icon">notifications_off</mat-icon>
    <h3>No pending notifications</h3>
    <p>You don't have any pending notifications that require your attention.</p>
  </div>

  <div *ngIf="!loading && notifications.length > 0" class="notifications-list">
    <mat-card
      *ngFor="let notification of notifications"
      class="notification-card">

      <mat-card-header class="notification-header-content">
        <div class="notification-icon-container">
          <mat-icon
            [class]="getNotificationIconClass(notification.requestType)"
            class="notification-type-icon">
            {{ getNotificationIcon(notification.requestType) }}
          </mat-icon>
        </div>

        <div class="notification-content">
          <mat-card-title class="notification-title-text">
            {{ notification.requestMessage }}
          </mat-card-title>

          <div class="notification-meta">
            <span class="notification-time">{{ getTimeAgo(notification.sendTime) }}</span>
            <span class="notification-type-badge">{{ getNotificationTypeLabel(notification.requestType) }}</span>
          </div>
        </div>
      </mat-card-header>

      <mat-card-actions class="notification-actions-content">
        <!-- Approve/Reject buttons for all pending notifications -->
        <div *ngIf="notification.status === 'PENDING'" class="request-actions">
          <button 
            mat-raised-button 
            color="primary" 
            (click)="approveRequest(notification); $event.stopPropagation()"
            class="approve-btn">
            <mat-icon>check</mat-icon>
            Approve
          </button>
          <button 
            mat-raised-button 
            color="warn" 
            (click)="rejectRequest(notification); $event.stopPropagation()"
            class="reject-btn">
            <mat-icon>close</mat-icon>
            Reject
          </button>
        </div>

        <!-- Default action button for non-pending notifications (if any) -->
        <button
          mat-button
          color="primary"
          (click)="handleNotificationAction(notification); $event.stopPropagation()"
          *ngIf="hasAction(notification) && notification.status !== 'PENDING'">
          {{ getActionLabel(notification) }}
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="success-message" role="alert">
    <mat-icon>check_circle</mat-icon>
    {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" class="error-message" role="alert">
    <mat-icon>error</mat-icon>
    {{ errorMessage }}
  </div>
</div>
